# F002: 业务类型映射与转换

## 功能描述

将原始业务类型映射为标准分类，支持灵活的配置管理，确保数据的一致性和可比性。

## 实现逻辑

### 配置文件结构
- **文件**: `reference/business_type_mapping.json`
- **格式**: JSON键值对映射
- **特点**: 支持多级映射和条件转换

### 映射算法
```python
def map_business_types(data):
    """业务类型映射核心算法"""
    for row in data:
        original_type = row.get('业务类型')
        if original_type in business_mapping:
            row['业务类型映射'] = business_mapping[original_type]
```

## 核心特性

1. **配置化管理**: 通过JSON文件维护映射关系
2. **多对一映射**: 支持多个原始类型映射到同一标准类型
3. **容错处理**: 未匹配类型保留原值并记录日志
4. **扩展性**: 支持正则表达式和条件映射

## 配置示例

```json
{
  "私家车": "个人车险",
  "企业用车": "商业车险", 
  "摩托车": "个人车险",
  "货车": "商业车险"
}
```

## 依赖关系

- **F001**: CSV数据解析 (提供原始数据)
- **F003**: KPI计算引擎 (接收映射后数据)

## 性能优化

1. **缓存机制**: 映射关系预加载到内存
2. **批量处理**: 一次性处理整批数据
3. **索引优化**: 使用哈希表快速查找

## 测试要点

1. **映射完整性**: 所有原始类型都有对应映射
2. **性能测试**: 大数据量下的映射速度
3. **边界条件**: 空值、特殊字符处理
4. **配置验证**: JSON格式和逻辑正确性

## 维护说明

- 定期更新映射规则以适应业务变化
- 监控未映射的业务类型
- 维护映射关系的版本控制

---

> 此功能确保数据标准化，是后续KPI计算的基础。