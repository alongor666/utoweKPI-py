# ğŸ› ï¸ æ™ºèƒ½æ–‡æ¡£çŸ¥è¯†åº“å·¥å…·é›†

> è‡ªåŠ¨åŒ–æ–‡æ¡£-ä»£ç åŒæ­¥ç³»ç»Ÿå·¥å…·

---

## ğŸ“š å·¥å…·æ¸…å•

### âœ… å·²å®Œæˆçš„å·¥å…·

| å·¥å…· | åŠŸèƒ½ | ä½¿ç”¨æ–¹æ³• |
|-----|------|----------|
| **meta-schema.json** | JSON Schema å®šä¹‰ | å®šä¹‰ meta.json çš„è§„èŒƒæ ¼å¼ |
| **validate-meta.js** | å…ƒæ•°æ®éªŒè¯å·¥å…· | `npm run validate-meta [åŠŸèƒ½ID]` |
| **update-hashes.js** | ä»£ç å“ˆå¸Œæ›´æ–°å·¥å…· | `node tools/update-hashes.js [åŠŸèƒ½ID]` |
| **update-docs.js** | æ–‡æ¡£ç´¢å¼•ç”Ÿæˆå™¨ | `npm run update-docs` |

### ğŸš§ å¾…å¼€å‘çš„å·¥å…·

| å·¥å…· | åŠŸèƒ½ | ä¼˜å…ˆçº§ |
|-----|------|--------|
| **link-tracker.js** | é“¾æ¥è¿½è¸ªä¸çŸ¥è¯†å›¾è°± | é«˜ |
| **migrate-meta.js** | æ‰¹é‡è¿ç§»åŠ©æ‰‹ | ä¸­ |
| **sync-engine.js** | æ™ºèƒ½åŒæ­¥å¼•æ“ | ä¸­ |
| **code-scanner.js** | ä»£ç æ³¨è§£æ‰«æå™¨ | ä½ |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
npm install
```

### 2. æ›´æ–°ç¤ºä¾‹æ¨¡å—çš„å“ˆå¸Œ

```bash
# æ›´æ–° F001 æ¨¡å—çš„ä»£ç å“ˆå¸Œ
node tools/update-hashes.js F001_csv_parsing

# æˆ–æ›´æ–°æ‰€æœ‰æ¨¡å—
node tools/update-hashes.js --all
```

### 3. éªŒè¯å…ƒæ•°æ®

```bash
# éªŒè¯å•ä¸ªæ¨¡å—
npm run validate-meta F001_csv_parsing

# éªŒè¯æ‰€æœ‰æ¨¡å—
npm run validate-meta
```

### 4. æ›´æ–°æ–‡æ¡£ç´¢å¼•

```bash
npm run update-docs
```

---

## ğŸ“– å·¥å…·è¯¦è§£

### validate-meta.js - å…ƒæ•°æ®éªŒè¯å·¥å…·

**åŠŸèƒ½**:
- âœ… éªŒè¯ meta.json æ˜¯å¦ç¬¦åˆ JSON Schema
- âœ… æ£€æŸ¥ä»£ç å¼•ç”¨çš„æ–‡ä»¶æ˜¯å¦å­˜åœ¨
- âœ… éªŒè¯æ–‡æ¡£äº¤å‰å¼•ç”¨çš„æœ‰æ•ˆæ€§
- âœ… æ£€æŸ¥ä»£ç å“ˆå¸Œæ˜¯å¦åŒ¹é…

**ä½¿ç”¨ç¤ºä¾‹**:

```bash
# éªŒè¯å•ä¸ªåŠŸèƒ½æ¨¡å—
node tools/validate-meta.js F001_csv_parsing

# éªŒè¯æ‰€æœ‰åŠŸèƒ½æ¨¡å—
node tools/validate-meta.js

# è¾“å‡ºç¤ºä¾‹
ğŸ“„ éªŒè¯ [F001_csv_parsing]...
  âœ… Schema éªŒè¯é€šè¿‡
  âœ… ä»£ç å¼•ç”¨ #1: æ–‡ä»¶æ ¼å¼åˆ†å‘å™¨ - parseFile (js/data.worker.js)
  âœ… ä»£ç å¼•ç”¨ #2: CSVè§£æä¸»é€»è¾‘ - parseCSV (js/data.worker.js)
  âœ… ä»£ç å¼•ç”¨ #1: å“ˆå¸Œä¸€è‡´ (æœªå˜æ›´)
  âœ… æ–‡æ¡£å¼•ç”¨ #1: depends_on â†’ F002
âœ… [F001_csv_parsing] éªŒè¯é€šè¿‡
```

**é€€å‡ºä»£ç **:
- `0`: éªŒè¯é€šè¿‡
- `1`: éªŒè¯å¤±è´¥

---

### update-hashes.js - ä»£ç å“ˆå¸Œæ›´æ–°å·¥å…·

**åŠŸèƒ½**:
- ğŸ” è¯»å– meta.json ä¸­çš„ä»£ç å¼•ç”¨
- ğŸ” è®¡ç®—å®é™…ä»£ç å—çš„ SHA-256 å“ˆå¸Œ
- ğŸ” æ›´æ–° meta.json ä¸­çš„ hash å­—æ®µ
- ğŸ” æ ‡è®° last_verified æ—¥æœŸ

**ä½¿ç”¨ç¤ºä¾‹**:

```bash
# æ›´æ–°å•ä¸ªæ¨¡å—
node tools/update-hashes.js F001_csv_parsing

# æ›´æ–°æ‰€æœ‰æ¨¡å—
node tools/update-hashes.js --all

# é¢„è§ˆæ¨¡å¼ï¼ˆä¸ä¿å­˜ï¼‰
node tools/update-hashes.js F001_csv_parsing --dry-run

# è¾“å‡ºç¤ºä¾‹
ğŸ“„ å¤„ç† [F001_csv_parsing]...
  ğŸ”„ ä»£ç å¼•ç”¨ #1: æ–‡ä»¶æ ¼å¼åˆ†å‘å™¨ - parseFile
     æ—§å“ˆå¸Œ: 3a7f2e1d
     æ–°å“ˆå¸Œ: e6c970ac
  ğŸ”„ ä»£ç å¼•ç”¨ #2: CSVè§£æä¸»é€»è¾‘ - parseCSV
     æ—§å“ˆå¸Œ: b4c8d9e2
     æ–°å“ˆå¸Œ: 060dce14
  ğŸ’¾ å·²æ›´æ–° meta.json

ğŸ“Š å“ˆå¸Œæ›´æ–°æ±‡æ€»æŠ¥å‘Š
æ€»è®¡: 5 ä¸ªä»£ç å¼•ç”¨
ğŸ”„ å·²æ›´æ–°: 5
âœ… æœªå˜æ›´: 0
âŒ é”™è¯¯: 0
```

---

### meta-schema.json - JSON Schema å®šä¹‰

å®šä¹‰äº†æ‰©å±•ç‰ˆ meta.json çš„å®Œæ•´ç»“æ„ï¼š

**æ ¸å¿ƒå­—æ®µ**:
- `id`: åŠŸèƒ½ IDï¼ˆå¿…éœ€ï¼‰
- `name`: åŠŸèƒ½åç§°ï¼ˆå¿…éœ€ï¼‰
- `status`: åŠŸèƒ½çŠ¶æ€ï¼ˆå¿…éœ€ï¼‰
- `description`: åŠŸèƒ½æè¿°
- `core_files`: æ ¸å¿ƒæ–‡ä»¶åˆ—è¡¨
- `tags`: æ ‡ç­¾åˆ—è¡¨

**ğŸ†• æ–°å¢å­—æ®µ**:
- `code_references`: ä»£ç å¼•ç”¨åˆ—è¡¨ï¼ˆç²¾ç¡®åˆ°è¡Œå·ï¼‰
- `doc_references`: æ–‡æ¡£äº¤å‰å¼•ç”¨
- `ai_metadata`: AI ç†è§£å…ƒæ•°æ®
- `change_tracking`: å˜æ›´è¿½è¸ªä¿¡æ¯

**è¯¦ç»†è¯´æ˜**: æŸ¥çœ‹ `å¼€å‘æ–‡æ¡£/META_MIGRATION_GUIDE.md`

---

## ğŸ”§ å¼€å‘ä¸ç»´æŠ¤

### æ·»åŠ æ–°å·¥å…·

1. åœ¨ `tools/` ç›®å½•åˆ›å»ºæ–°æ–‡ä»¶
2. éµå¾ªç°æœ‰å·¥å…·çš„å‘½åè§„èŒƒ
3. æ·»åŠ è¯¦ç»†çš„ JSDoc æ³¨é‡Š
4. åœ¨ `package.json` ä¸­æ·»åŠ  npm script
5. æ›´æ–°æ­¤ README

### ä¿®æ”¹ Schema

1. ç¼–è¾‘ `tools/schemas/meta-schema.json`
2. è¿è¡ŒéªŒè¯å·¥å…·æµ‹è¯•å…¼å®¹æ€§
3. æ›´æ–° `META_MIGRATION_GUIDE.md`
4. æ‰¹é‡æ›´æ–°ç°æœ‰ meta.json æ–‡ä»¶

---

## ğŸ“Š å·¥ä½œæµé›†æˆ

### Git Hooksï¼ˆè®¡åˆ’ä¸­ï¼‰

```bash
# .husky/pre-commit
node tools/validate-meta.js
```

### GitHub Actionsï¼ˆè®¡åˆ’ä¸­ï¼‰

```yaml
# .github/workflows/docs-sync.yml
name: Docs Sync
on: [push]
jobs:
  validate:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - run: npm install
      - run: npm run validate-meta
```

---

## ğŸ†˜ æ•…éšœæ’æŸ¥

### é—®é¢˜ï¼šéªŒè¯å¤±è´¥ - æ–‡ä»¶ä¸å­˜åœ¨

```
âŒ ä»£ç å¼•ç”¨ #1: æ–‡ä»¶ä¸å­˜åœ¨ - js/data.worker.js
```

**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼ˆç›¸å¯¹äºé¡¹ç›®æ ¹ç›®å½•ï¼‰
- ç¡®è®¤æ–‡ä»¶ç¡®å®å­˜åœ¨

### é—®é¢˜ï¼šå“ˆå¸Œä¸åŒ¹é…

```
âŒ ä»£ç å¼•ç”¨ #1: å“ˆå¸Œä¸åŒ¹é… (ä»£ç å·²å˜æ›´)
```

**è§£å†³æ–¹æ¡ˆ**:
1. è¿è¡Œ `node tools/update-hashes.js [åŠŸèƒ½ID]` æ›´æ–°å“ˆå¸Œ
2. æ£€æŸ¥ä»£ç å˜æ›´æ˜¯å¦éœ€è¦æ›´æ–°æ–‡æ¡£
3. æ›´æ–°ç›¸å…³æ–‡æ¡£åé‡æ–°éªŒè¯

### é—®é¢˜ï¼šSchema éªŒè¯å¤±è´¥

```
âŒ Schema éªŒè¯å¤±è´¥:
   /code_references/0/lines: must match pattern "^\\d+(-\\d+)?$"
```

**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥å­—æ®µæ ¼å¼æ˜¯å¦ç¬¦åˆ Schema å®šä¹‰
- å‚è€ƒ `å¼€å‘æ–‡æ¡£/01_features/F001_csv_parsing/meta.json` ç¤ºä¾‹

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **è¿ç§»æŒ‡å—**: `å¼€å‘æ–‡æ¡£/META_MIGRATION_GUIDE.md`
- **Schema å®šä¹‰**: `tools/schemas/meta-schema.json`
- **ç¤ºä¾‹æ–‡ä»¶**: `å¼€å‘æ–‡æ¡£/01_features/F001_csv_parsing/meta.json`

---

## ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’

### é˜¶æ®µ 1ï¼šå®Œå–„åŸºç¡€å·¥å…·ï¼ˆæœ¬å‘¨ï¼‰
- [x] åˆ›å»º JSON Schema å®šä¹‰
- [x] å®ç°éªŒè¯å·¥å…·
- [x] å®ç°å“ˆå¸Œæ›´æ–°å·¥å…·
- [ ] ç¼–å†™å•å…ƒæµ‹è¯•
- [ ] æ·»åŠ  CI/CD é›†æˆ

### é˜¶æ®µ 2ï¼šé“¾æ¥è¿½è¸ªç³»ç»Ÿï¼ˆä¸‹å‘¨ï¼‰
- [ ] å®ç° link-tracker.js
- [ ] ç”ŸæˆçŸ¥è¯†å›¾è°±å¯è§†åŒ–
- [ ] å®ç°é“¾æ¥æœ‰æ•ˆæ€§æ£€æŸ¥
- [ ] æ”¯æŒ Mermaid å›¾è¡¨å¯¼å‡º

### é˜¶æ®µ 3ï¼šæ™ºèƒ½åŒæ­¥å¼•æ“ï¼ˆ2 å‘¨åï¼‰
- [ ] å®ç° sync-engine.js
- [ ] è‡ªåŠ¨æ£€æµ‹ä»£ç å˜æ›´
- [ ] ç”Ÿæˆæ–‡æ¡£æ›´æ–°å»ºè®®
- [ ] é›†æˆ Git hooks

---

**æœ€åæ›´æ–°**: 2025-12-23
**ç»´æŠ¤è€…**: autowrKPI Team
